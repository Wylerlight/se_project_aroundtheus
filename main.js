!function(){"use strict";class e{constructor(e,t,s){this._name=e.title,this._link=e.url,this._handleCardClick=s,this._cardSelector=t}_getTemplate(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}_setEventListeners(){this._likeButton=this._element.querySelector(".card__button");const e=this._element.querySelector(".card__trash-button");this._likeButton.addEventListener("click",(()=>{this._likeButton.classList.toggle("card__like-active")})),e.addEventListener("click",(()=>{this._element.remove()})),this._cardImageElement.addEventListener("click",(()=>{this._handleCardClick(this._cardImageElement)}))}getCard(){this._element=this._getTemplate();const e=this._element.querySelector(".card__title");return this._cardImageElement=this._element.querySelector(".card__image"),e.textContent=this._name,this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._setEventListeners(),this._element}}class t{constructor(e,t){this._formElement=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputError(e){this._errorElement=this._formElement.querySelector(`.${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorElement.textContent=e.validationMessage,this._errorElement.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(e){return e.some((e=>!e.validity.valid))}toggleButtonState(){this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class s{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this.close=this.close.bind(this),this.open=this.open.bind(this),this._modalExitButton=this._popupElement.querySelector(".modal__exit")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._modalExitButton.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("mousedown",this._overlayClickCloseListener)}_overlayClickCloseListener=e=>{e.target===e.currentTarget&&this.close(e.target)}}class r extends s{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t.bind(this),this._modalInputs=this._popupForm.querySelectorAll(".modal__field")}_getInputValues(){const e={};return this._modalInputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}close(){this._popupForm.reset(),super.close()}}const n=document.querySelector(".profile__button-edit"),o=document.querySelector(".profile-container"),i=(document.querySelector(".profile__title"),document.querySelector(".profile__description"),o.querySelector(".profile-input")),l=(document.querySelector(".cards"),document.querySelector(".card-modal").querySelector(".card-input")),a=i.querySelector("#modal-description-name"),c=i.querySelector("#modal-description-job"),u=document.querySelector(".profile__button-add"),d={inputSelector:".modal__field",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__field_type_error",errorClass:"modal__error_visible"},m=t=>{const s=new e(t,"#card-template",h).getCard();p.addItem(s)},_=new class extends s{constructor(e){super(e)}open(e){const t=this._popupElement.querySelector(".image__main"),s=this._popupElement.querySelector(".image__description");t.src=e.src,t.alt=e.alt,s.textContent=e.alt,super.open()}}(".image");function h(e){_.open(e)}_.setEventListeners();const p=new class{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{title:"Lago di Braies",url:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"},{title:"Vanoise National Park",url:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{title:"Latemar",url:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{title:"Bald Mountains",url:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{title:"Lake Louise",url:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{title:"Yosemite Valley",url:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"}],renderer:m},".cards");p.renderItems();const E=new class{constructor(e){let{userNameSelector:t,userJobSelector:s}=e;this._userNameElement=document.querySelector(t),this._userJobElement=document.querySelector(s)}getUserInfo(){return{userName:this._userNameElement.textContent,userJobDescription:this._userJobElement.textContent}}setUserInfo(e){let{title:t,job:s}=e;this._userNameElement.textContent=t,this._userJobElement.textContent=s}}({userNameSelector:".profile__title",userJobSelector:".profile__description"}),v=new r(".profile-modal",(e=>{E.setUserInfo(e),v.close()}));v.setEventListeners(),n.addEventListener("click",(()=>{const e=E.getUserInfo();a.value=e.userName,c.value=e.userJobDescription,g.toggleButtonState(),v.open()}));const S=new r(".card-modal",(e=>{m(e),S.close()}));u.addEventListener("click",(()=>{y.toggleButtonState(),S.open()})),S.setEventListeners();const g=new t(d,i);g.enableValidation();const y=new t(d,l);y.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFpQi9GLFlBQ2hDbUcsbUJBQW9CM0gsS0FBS3dILGdCQUFnQmhHLFlBRTdDLENBRUFvRyxZQUFXQyxHQUFpQixJQUFoQixNQUFFM0gsRUFBSyxJQUFFNEgsR0FBS0QsRUFDeEI3SCxLQUFLdUgsaUJBQWlCL0YsWUFBY3RCLEVBQ3BDRixLQUFLd0gsZ0JBQWdCaEcsWUFBY3NHLENBQ3JDLEdIZ0Y0QixDQUM1QlQsaUJBQWtCLGtCQUNsQkMsZ0JBQWlCLDBCQUdiUyxFQUFtQixJQUFJL0MsRUFBYyxrQkFBbUJnRCxJQUM1RFosRUFBU1EsWUFBWUksR0FDckJELEVBQWlCeEQsT0FBTyxJQUUxQndELEVBQWlCbkQsb0JBRWpCZ0IsRUFBa0IzRSxpQkFBaUIsU0FBUyxLQUMxQyxNQUFNZ0gsRUFBV2IsRUFBU0ssY0FFMUJ6QixFQUFXTixNQUFRdUMsRUFBU1AsU0FDNUJ6QixFQUFTUCxNQUFRdUMsRUFBU04sbUJBQzFCTyxFQUFrQjNFLG9CQUNsQndFLEVBQWlCdkQsTUFBTSxJQU96QixNQUFNMkQsRUFBbUIsSUFBSW5ELEVBQWMsZUFBZ0JnRCxJQUN6RDdCLEVBQVc2QixHQUNYRyxFQUFpQjVELE9BQU8sSUFHMUIyQixFQUFjakYsaUJBQWlCLFNBQVMsS0FDdENtSCxFQUFxQjdFLG9CQUNyQjRFLEVBQWlCM0QsTUFBTSxJQUV6QjJELEVBQWlCdkQsb0JBTWpCLE1BQU1zRCxFQUFvQixJQUFJdkcsRUFBY0MsRUFBVWtFLEdBQ3REb0MsRUFBa0JuRSxtQkFDbEIsTUFBTXFFLEVBQXVCLElBQUl6RyxFQUFjQyxFQUFVbUUsR0FDekRxQyxFQUFxQnJFLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEudGl0bGU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS51cmw7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcblxyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b25cIik7XHJcbiAgICBjb25zdCBjYXJkVHJhc2hCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2gtYnV0dG9uXCIpO1xyXG5cclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1hY3RpdmVcIik7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBfdG9nZ2xlTGlrZSA9ICgpID0+IHtcclxuICAgIC8vICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1hY3RpdmVcIik7XHJcbiAgICAvLyB9O1xyXG5cclxuICAgIGNhcmRUcmFzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fY2FyZEltYWdlRWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldENhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIGNvbnN0IGNhcmRUaXRsZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG5cclxuICAgIGNhcmRUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuXHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XHJcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0TGlzdCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0TGlzdC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmNsb3NlID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5vcGVuID0gdGhpcy5vcGVuLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9tb2RhbEV4aXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZXhpdFwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX21vZGFsRXhpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBcIm1vdXNlZG93blwiLFxyXG4gICAgICB0aGlzLl9vdmVybGF5Q2xpY2tDbG9zZUxpc3RlbmVyXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX292ZXJsYXlDbGlja0Nsb3NlTGlzdGVuZXIgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgdGhpcy5jbG9zZShldnQudGFyZ2V0KTtcclxuICAgIH1cclxuICB9O1xyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX21vZGFsSW5wdXRzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2ZpZWxkXCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRPYmplY3QgPSB7fTtcclxuICAgIHRoaXMuX21vZGFsSW5wdXRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRPYmplY3RbZWxlbWVudC5uYW1lXSA9IGVsZW1lbnQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dE9iamVjdDtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIHRpdGxlOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICB1cmw6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICB1cmw6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwiTGF0ZW1hclwiLFxyXG4gICAgdXJsOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICB1cmw6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICB1cmw6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgdXJsOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICBDb25zdGFudHMgOiBUZW1wb3JhcnkgUGxhY2VtZW50ICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uLWVkaXRcIik7IC8vIGVkaXQgYnV0dG9uIGZvciBwcm9maWxlIGluZm9cclxuY29uc3QgcHJvZmlsZU1vZGFsQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlLWNvbnRhaW5lclwiKTtcclxuY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcclxuY29uc3QgcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XHJcbmNvbnN0IHByb2ZpbGVGb3JtRWxlbWVudCA9XHJcbiAgcHJvZmlsZU1vZGFsQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZS1pbnB1dFwiKTsgLy8gZm9ybSB3cmFwcGVyIGZvciBwcm9maWxlIGVkaXQgaW5wdXRzXHJcblxyXG5jb25zdCBjYXJkTGlzdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzXCIpOyAvLyB0aGlzIGlzIHRoZSBlbXB0eSA8c2VjdGlvbj4gdGhhdCBuZXcgY2FyZHMgYXJlIGFkZGVkIHRvXHJcblxyXG5jb25zdCBjYXJkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmQtbW9kYWxcIik7IC8vIHdyYXBwZXIgZm9yIHRoZSBlbnRpcmUgbmV3IGNhcmQgbW9kYWxcclxuY29uc3QgY2FyZEZvcm1FbGVtZW50ID0gY2FyZFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZC1pbnB1dFwiKTsgLy8gZm9ybSB3cmFwcGVyIGZvciBuZXcgY2FyZCBpbnB1dHMgJiBzdWJtaXQgYnV0dG9uXHJcbmNvbnN0IHRpdGxlSW5wdXQgPSBwcm9maWxlRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1kZXNjcmlwdGlvbi1uYW1lXCIpO1xyXG5jb25zdCBqb2JJbnB1dCA9IHByb2ZpbGVGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWRlc2NyaXB0aW9uLWpvYlwiKTtcclxuY29uc3QgY2FyZEFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uLWFkZFwiKTtcclxuXHJcbmNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19maWVsZFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19maWVsZF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuY29uc3QgcmVuZGVyQ2FyZCA9IChpdGVtKSA9PiB7XHJcbiAgY29uc3QgYWRkTmV3Q2FyZCA9IG5ldyBDYXJkKGl0ZW0sIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlQ2FyZENsaWNrKTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGFkZE5ld0NhcmQuZ2V0Q2FyZCgpO1xyXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG59O1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3B1cCBDYXJkIEltYWdlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5pbWFnZVwiKTtcclxuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKGRhdGEpIHtcclxuICBpbWFnZVBvcHVwLm9wZW4oZGF0YSk7XHJcbn1cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgIEluaXRpYWwgQ2FyZCBSZW5kZXIgU2VjdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICB9LFxyXG4gIFwiLmNhcmRzXCJcclxuKTtcclxuXHJcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgRm9ybSBQb3B1cCA6IEVkaXQgUHJvZmlsZSAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIHVzZXJOYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXHJcbiAgdXNlckpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG59KTtcclxuXHJcbmNvbnN0IHByb2ZpbGVQb3B1cEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wcm9maWxlLW1vZGFsXCIsIChpbnB1dFZhbHVlcykgPT4ge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGlucHV0VmFsdWVzKTtcclxuICBwcm9maWxlUG9wdXBGb3JtLmNsb3NlKCk7XHJcbn0pO1xyXG5wcm9maWxlUG9wdXBGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuXHJcbiAgdGl0bGVJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLnVzZXJOYW1lO1xyXG4gIGpvYklucHV0LnZhbHVlID0gdXNlckRhdGEudXNlckpvYkRlc2NyaXB0aW9uO1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgcHJvZmlsZVBvcHVwRm9ybS5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICBGb3JtIFBvcHVwIDogQWRkaW5nIE5ldyBDYXJkICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmNvbnN0IG5ld0NhcmRQb3B1cEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5jYXJkLW1vZGFsXCIsIChpbnB1dFZhbHVlcykgPT4ge1xyXG4gIHJlbmRlckNhcmQoaW5wdXRWYWx1ZXMpO1xyXG4gIG5ld0NhcmRQb3B1cEZvcm0uY2xvc2UoKTtcclxufSk7XHJcblxyXG5jYXJkQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICBuZXdDYXJkUG9wdXBGb3JtLm9wZW4oKTtcclxufSk7XHJcbm5ld0NhcmRQb3B1cEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZvcm0gVmFsaWRhdG9ycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBwcm9maWxlRm9ybUVsZW1lbnQpO1xyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGNhcmRGb3JtRWxlbWVudCk7XHJcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgY29uc3QgaW1hZ2VQb3B1cE1haW4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWFnZV9fbWFpblwiKTtcclxuICAgIGNvbnN0IGltYWdlUG9wdXBEZXNjcmlwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5pbWFnZV9fZGVzY3JpcHRpb25cIlxyXG4gICAgKTtcclxuICAgIGltYWdlUG9wdXBNYWluLnNyYyA9IGRhdGEuc3JjO1xyXG4gICAgaW1hZ2VQb3B1cE1haW4uYWx0ID0gZGF0YS5hbHQ7XHJcbiAgICBpbWFnZVBvcHVwRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLmFsdDtcclxuXHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZVNlbGVjdG9yLCB1c2VySm9iU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fdXNlck5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3VzZXJKb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VySm9iU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB1c2VyTmFtZTogdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICB1c2VySm9iRGVzY3JpcHRpb246IHRoaXMuX3VzZXJKb2JFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgdGl0bGUsIGpvYiB9KSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aXRsZTtcclxuICAgIHRoaXMuX3VzZXJKb2JFbGVtZW50LnRleHRDb250ZW50ID0gam9iO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsInRoaXMiLCJfbmFtZSIsInRpdGxlIiwiX2xpbmsiLCJ1cmwiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2NhcmRTZWxlY3RvciIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiX2VsZW1lbnQiLCJjYXJkVHJhc2hCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiX2NhcmRJbWFnZUVsZW1lbnQiLCJnZXRDYXJkIiwiY2FyZFRpdGxlRWxlbWVudCIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJfZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsImVycm9yRWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsImlucHV0TGlzdCIsInNvbWUiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9pbnB1dExpc3QiLCJfYnV0dG9uRWxlbWVudCIsImRpc2FibGVkIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImNsb3NlIiwib3BlbiIsIl9tb2RhbEV4aXRCdXR0b24iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJfb3ZlcmxheUNsaWNrQ2xvc2VMaXN0ZW5lciIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX21vZGFsSW5wdXRzIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRPYmplY3QiLCJlbGVtZW50IiwibmFtZSIsInZhbHVlIiwicmVzZXQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVNb2RhbENvbnRhaW5lciIsInByb2ZpbGVGb3JtRWxlbWVudCIsImNhcmRGb3JtRWxlbWVudCIsInRpdGxlSW5wdXQiLCJqb2JJbnB1dCIsImNhcmRBZGRCdXR0b24iLCJyZW5kZXJDYXJkIiwiaXRlbSIsImNhcmRFbGVtZW50IiwiY2FyZFNlY3Rpb24iLCJhZGRJdGVtIiwiaW1hZ2VQb3B1cCIsImltYWdlUG9wdXBNYWluIiwiaW1hZ2VQb3B1cERlc2NyaXB0aW9uIiwiX3JlZiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsInByZXBlbmQiLCJ1c2VySW5mbyIsInVzZXJOYW1lU2VsZWN0b3IiLCJ1c2VySm9iU2VsZWN0b3IiLCJfdXNlck5hbWVFbGVtZW50IiwiX3VzZXJKb2JFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJKb2JEZXNjcmlwdGlvbiIsInNldFVzZXJJbmZvIiwiX3JlZjIiLCJqb2IiLCJwcm9maWxlUG9wdXBGb3JtIiwiaW5wdXRWYWx1ZXMiLCJ1c2VyRGF0YSIsImVkaXRGb3JtVmFsaWRhdG9yIiwibmV3Q2FyZFBvcHVwRm9ybSIsImFkZENhcmRGb3JtVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==