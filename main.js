!function(){"use strict";const e=document.querySelector(".profile__button-edit"),t=document.querySelector(".profile-container").querySelector(".profile-input"),r=t.querySelector("#modal-description-name"),s=t.querySelector("#modal-description-job"),n=document.querySelector(".profile__button-add"),i=(document.querySelector(".profile__avatar"),document.querySelector(".profile__avatar-edit"));document.querySelector("#modal-edit-profile-button"),document.querySelector("#modal-add-card-button"),document.querySelector("#modal-avatar-image-save"),document.querySelector("#modal-verify-delete-card-button");class o{constructor(e,t,r,s,n,i,o){this._userId=s,this._cardId=e._id,this._currentIdOwner=e.owner._id,this._name=e.name,this._link=e.link,this._handleCardClick=r,this._cardTrashButtonVerify=i,this._handleCardLike=n,this._cardLikes=e.likes,this._cardSelector=t,this.cardIsLiked=this.cardIsLiked.bind(this),this._handleDeleteCard=o}handleCardTrashButton(){const e=this._element.querySelector(".card__trash-button");this._currentIdOwner!==this._userId&&e.remove()}updateLike(e){this._cardLikes=e.likes,this.showCardLikes()}showCardLikes(){this._cardLikes.length>0?this._element.querySelector(".card__like-counter").textContent=this._cardLikes.length:this._element.querySelector(".card__like-counter").textContent="",this.cardIsLiked()?this._element.querySelector(".card__button").classList.add("card__like-active"):this._element.querySelector(".card__button").classList.remove("card__like-active")}cardIsLiked(){return this._cardLikes.some((e=>e._id===this._userId))}_getTemplate(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}_setEventListeners(){const e=this._element.querySelector(".card__button");this._element.querySelector(".card__trash-button").addEventListener("click",(()=>{this._cardTrashButtonVerify(),this._handleDeleteCard(this._cardId,this._element)})),this._cardImageElement.addEventListener("click",(()=>{this._handleCardClick(this._cardImageElement)})),e.addEventListener("click",(()=>{this._handleCardLike(this)}))}getCard(){this._element=this._getTemplate();const e=this._element.querySelector(".card__title");return this._cardImageElement=this._element.querySelector(".card__image"),e.textContent=this._name,this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._setEventListeners(),this.handleCardTrashButton(),this.showCardLikes(),this._element}}class a{constructor(e,t){this._formElement=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputError(e){this._errorElement=this._formElement.querySelector(`.${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorElement.textContent=e.validationMessage,this._errorElement.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(e){return e.some((e=>!e.validity.valid))}toggleButtonState(){this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class l{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this.close=this.close.bind(this),this.open=this.open.bind(this),this._modalExitButton=this._popupElement.querySelector(".modal__exit")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._modalExitButton.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("mousedown",this._overlayClickCloseListener)}_overlayClickCloseListener=e=>{e.target===e.currentTarget&&this.close(e.target)}}class d extends l{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t.bind(this),this._modalInputs=this._popupForm.querySelectorAll(".modal__field"),this._submitButton=this._popupForm.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=e?t:this._submitButtonText}_getInputValues(){const e={};return this._modalInputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}close(){this._popupForm.reset(),super.close()}}const c=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}_request(e,t){return fetch(e,t).then(this._checkResponse)}getUserInformation(){return this._request(`${this._baseUrl}/users/me`,{headers:this._headers}).finally((()=>{console.log("Done with getting user info")}))}updateProfilePicture(e){let{avatar:t}=e;return this._request(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((e=>e)).finally((()=>{console.log("Done running Avatar change API")}))}getInitialCards(){return this._request(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>e)).finally((()=>{console.log("Done with getting initial cards")}))}addNewCard(e){let{name:t,link:r}=e;return this._request(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})}).then((e=>e)).finally((()=>{console.log("Done adding card from server to page")}))}editProfileInformation(e){let{name:t,about:r}=e;return this._request(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})}).then((e=>e)).finally((()=>{console.log("Done sending user info to server")}))}deleteCardRequest(e){return this._request(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).finally((()=>{console.log("Done deleting card")}))}likesCountAdd(e){return this._request(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then((e=>e)).finally((()=>{console.log("Done adding like")}))}likesCountRemove(e){return this._request(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then((e=>e)).finally((()=>{console.log("Done deleting like")}))}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"5e7676bf-611c-4ca9-9820-f740c8ee0732","Content-Type":"application/json"}});let h;const u=new class extends l{constructor(e){super(e)}open(e){const t=this._popupElement.querySelector(".image__main"),r=this._popupElement.querySelector(".image__description");t.src=e.src,t.alt=e.alt,r.textContent=e.alt,super.open()}}(".image");function _(e){u.open(e)}u.setEventListeners();const m=new class{constructor(e){let{userNameSelector:t,userJobSelector:r,userAvatarSelector:s}=e;this._userNameElement=document.querySelector(t),this._userJobElement=document.querySelector(r),this._userAvatarElement=document.querySelector(s)}getUserInfo(){return{userName:this._userNameElement.textContent,userJobDescription:this._userJobElement.textContent}}setUserInfo(e){this._userNameElement.textContent=e.name,this._userJobElement.textContent=e.about,this._userAvatarElement.src=e.avatar,this._userAvatarElement.alt=e.name}}({userNameSelector:".profile__title",userJobSelector:".profile__description",userAvatarSelector:".profile__avatar"}),p=new class{constructor(e,t){let{renderer:r}=e;this._renderer=r,this._container=document.querySelector(t)}renderItems(e){e.reverse().forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({renderer:e=>{const t=new o(e,"#card-template",_,h,y,C,L).getCard();p.addItem(t)}},".cards"),E={};var v;v={formSelector:".modal__form",inputSelector:".modal__field",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__field_type_error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(v.formSelector)).forEach((e=>{const t=new a(v,e),r=e.getAttribute("id");E[r]=t,t.enableValidation()})),Promise.all([c.getUserInformation(),c.getInitialCards()]).then((e=>{let[t,r]=e;h=t._id,m.setUserInfo(t),p.renderItems(r)})).catch((e=>{console.error(e)}));const f=new d(".avatar__modal",(function(e){f.renderLoading(e),c.updateProfilePicture(e).then((e=>{m.setUserInfo(e)})).then((()=>{f.close()})).catch((e=>{console.error(e)})).finally((()=>{f.renderLoading(!1)}))}));i.addEventListener("click",(()=>{E["avatar-form"].toggleButtonState(),f.open()})),f.setEventListeners();const b=new d(".card-modal",(function(e){b.renderLoading(e),c.addNewCard(e).then((e=>{p.renderItems([e])})).then((()=>{b.close()})).catch((e=>{console.error(e)})).finally((()=>{b.renderLoading(!1)}))}));n.addEventListener("click",(()=>{E["new-card-form"].toggleButtonState(),b.open()})),b.setEventListeners();const S=new d(".profile-modal",(function(e){S.renderLoading(e),c.editProfileInformation(e).then((e=>{m.setUserInfo(e)})).then((()=>{S.close()})).catch((e=>{console.error(e)})).finally((()=>{S.renderLoading(!1)}))}));function y(e){e.cardIsLiked()?c.likesCountRemove(e._cardId).then((t=>{e.updateLike(t)})).catch((e=>{console.error(e)})):c.likesCountAdd(e._cardId).then((t=>{e.updateLike(t)})).catch((e=>{console.error(e)}))}S.setEventListeners(),e.addEventListener("click",(()=>{const e=m.getUserInfo();r.value=e.userName,s.value=e.userJobDescription,E["profile-input-form"].toggleButtonState(),S.open()}));const g=new class extends l{constructor(e,t){super(e),this._verifyDeleteCardButton=this._popupElement.querySelector("#modal-verify-delete-card-button"),this._handleFormSubmit=t,this._handleSubmit=this._handleSubmit.bind(this),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupForm.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=e?t:this._submitButtonText}setSubmitAction(e){this._handleFormSubmit=e}setEventListeners(){super.setEventListeners(),this._verifyDeleteCardButton.addEventListener("click",this._handleSubmit)}_handleSubmit(){this._handleFormSubmit()}}(".card-delete-verify",L);function L(e,t){g.setSubmitAction((()=>{g.renderLoading(e),c.deleteCardRequest(e).then((()=>{t.remove()})).then((()=>{g.close()})).catch((e=>{console.error(e)})).finally((()=>{g.renderLoading(!1)}))}))}function C(){g.open()}g.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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NUcsTUFDbkIsQ0F6QkE0RyxFQUFpQnhHLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cENhcmREZWxldGVWZXJpZnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICBDb25zdGFudHMgZm9yIHVzZSBpbiBpbmRleC5qcyAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19idXR0b24tZWRpdFwiXHJcbik7IC8vIGVkaXQgYnV0dG9uIGZvciBwcm9maWxlIGluZm9cclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlTW9kYWxDb250YWluZXIgPVxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZS1jb250YWluZXJcIik7XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm1FbGVtZW50ID1cclxuICBwcm9maWxlTW9kYWxDb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlLWlucHV0XCIpOyAvLyBmb3JtIHdyYXBwZXIgZm9yIHByb2ZpbGUgZWRpdCBpbnB1dHNcclxuXHJcbmV4cG9ydCBjb25zdCB0aXRsZUlucHV0ID0gcHJvZmlsZUZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjbW9kYWwtZGVzY3JpcHRpb24tbmFtZVwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBqb2JJbnB1dCA9IHByb2ZpbGVGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI21vZGFsLWRlc2NyaXB0aW9uLWpvYlwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBjYXJkQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tYWRkXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHVzZXJQcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhckVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2F2YXRhci1lZGl0XCJcclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2ZpZWxkXCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2ZpZWxkX3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1PREFMIFNVQk1JVCBCVVRUT05TICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgY29uc3Qgc3VibWl0QnV0dG9uRWRpdFByb2ZpbGVJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNtb2RhbC1lZGl0LXByb2ZpbGUtYnV0dG9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHN1Ym1pdEJ1dHRvbkFkZE5ld0NhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI21vZGFsLWFkZC1jYXJkLWJ1dHRvblwiXHJcbik7XHJcblxyXG5leHBvcnQgY29uc3Qgc3VibWl0QnV0dG9uQ2hhbmdlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNtb2RhbC1hdmF0YXItaW1hZ2Utc2F2ZVwiXHJcbik7XHJcblxyXG5leHBvcnQgY29uc3Qgc3VibWl0QnV0dG9uRGVsZXRlQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjbW9kYWwtdmVyaWZ5LWRlbGV0ZS1jYXJkLWJ1dHRvblwiXHJcbik7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgZGF0YSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUNhcmRDbGljayxcclxuICAgIHVzZXJJZCxcclxuICAgIGhhbmRsZUNhcmRMaWtlLFxyXG4gICAgY2FyZFRyYXNoQnV0dG9uVmVyaWZ5LFxyXG4gICAgaGFuZGxlRGVsZXRlQ2FyZFxyXG4gICkge1xyXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgdGhpcy5fY2FyZElkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9jdXJyZW50SWRPd25lciA9IGRhdGEub3duZXIuX2lkO1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9jYXJkVHJhc2hCdXR0b25WZXJpZnkgPSBjYXJkVHJhc2hCdXR0b25WZXJpZnk7XHJcblxyXG4gICAgdGhpcy5faGFuZGxlQ2FyZExpa2UgPSBoYW5kbGVDYXJkTGlrZTtcclxuICAgIHRoaXMuX2NhcmRMaWtlcyA9IGRhdGEubGlrZXM7XHJcblxyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG5cclxuICAgIHRoaXMuY2FyZElzTGlrZWQgPSB0aGlzLmNhcmRJc0xpa2VkLmJpbmQodGhpcyk7XHJcblxyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZURlbGV0ZUNhcmQ7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVDYXJkVHJhc2hCdXR0b24oKSB7XHJcbiAgICBjb25zdCBjYXJkVHJhc2hCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2gtYnV0dG9uXCIpO1xyXG5cclxuICAgIGlmICh0aGlzLl9jdXJyZW50SWRPd25lciAhPT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgIGNhcmRUcmFzaEJ1dHRvbi5yZW1vdmUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZUxpa2UocmVzdWx0KSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZXMgPSByZXN1bHQubGlrZXM7XHJcbiAgICB0aGlzLnNob3dDYXJkTGlrZXMoKTtcclxuICB9XHJcblxyXG4gIHNob3dDYXJkTGlrZXMoKSB7XHJcbiAgICBpZiAodGhpcy5fY2FyZExpa2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtY291bnRlclwiKS50ZXh0Q29udGVudCA9XHJcbiAgICAgICAgdGhpcy5fY2FyZExpa2VzLmxlbmd0aDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWNvdW50ZXJcIikudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmNhcmRJc0xpa2VkKCkpIHtcclxuICAgICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvblwiKVxyXG4gICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uXCIpXHJcbiAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWFjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNhcmRJc0xpa2VkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRMaWtlcy5zb21lKChsaWtlcykgPT4ge1xyXG4gICAgICByZXR1cm4gbGlrZXMuX2lkID09PSB0aGlzLl91c2VySWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGNhcmRMaWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvblwiKTtcclxuICAgIGNvbnN0IGNhcmRUcmFzaEJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaC1idXR0b25cIik7XHJcblxyXG4gICAgY2FyZFRyYXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2NhcmRUcmFzaEJ1dHRvblZlcmlmeSgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKHRoaXMuX2NhcmRJZCwgdGhpcy5fZWxlbWVudCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9jYXJkSW1hZ2VFbGVtZW50KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICBjb25zdCBjYXJkVGl0bGVFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuXHJcbiAgICBjYXJkVGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5oYW5kbGVDYXJkVHJhc2hCdXR0b24oKTtcclxuICAgIHRoaXMuc2hvd0NhcmRMaWtlcygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcblxyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xyXG4gICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dExpc3QpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dExpc3QudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMub3BlbiA9IHRoaXMub3Blbi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fbW9kYWxFeGl0QnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2V4aXRcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9tb2RhbEV4aXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgXCJtb3VzZWRvd25cIixcclxuICAgICAgdGhpcy5fb3ZlcmxheUNsaWNrQ2xvc2VMaXN0ZW5lclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9vdmVybGF5Q2xpY2tDbG9zZUxpc3RlbmVyID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0KSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoZXZ0LnRhcmdldCk7XHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0LmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9tb2RhbElucHV0cyA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19maWVsZFwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcsIGxvYWRpbmdUZXh0ID0gXCJTYXZpbmcuLi5cIikge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dE9iamVjdCA9IHt9O1xyXG4gICAgdGhpcy5fbW9kYWxJbnB1dHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dE9iamVjdFtlbGVtZW50Lm5hbWVdID0gZWxlbWVudC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0T2JqZWN0O1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHtcclxuICBwcm9maWxlRWRpdEJ1dHRvbixcclxuICBwcm9maWxlTW9kYWxDb250YWluZXIsXHJcbiAgcHJvZmlsZUZvcm1FbGVtZW50LFxyXG4gIHRpdGxlSW5wdXQsXHJcbiAgam9iSW5wdXQsXHJcbiAgY2FyZEFkZEJ1dHRvbixcclxuICB1c2VyUHJvZmlsZUF2YXRhcixcclxuICBwcm9maWxlQXZhdGFyRWRpdEJ1dHRvbixcclxuICBzZXR0aW5ncyxcclxuICBzdWJtaXRCdXR0b25FZGl0UHJvZmlsZUluZm8sXHJcbiAgc3VibWl0QnV0dG9uQWRkTmV3Q2FyZCxcclxuICBzdWJtaXRCdXR0b25DaGFuZ2VBdmF0YXIsXHJcbiAgc3VibWl0QnV0dG9uRGVsZXRlQ2FyZCxcclxufSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xyXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQgUG9wdXAgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cC5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcclxuaW1wb3J0IFBvcHVwQ2FyZERlbGV0ZVZlcmlmeSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwQ2FyZERlbGV0ZVZlcmlmeS5qcyc7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XHJcbmltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFQSSBDb25zdGFudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogJ2h0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTInLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246ICc1ZTc2NzZiZi02MTFjLTRjYTktOTgyMC1mNzQwYzhlZTA3MzInLFxyXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICB9LFxyXG59KTtcclxuXHJcbmxldCB1c2VySWQ7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZW5kZXIgQ2FyZCBGdW5jdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuY29uc3QgcmVuZGVyQ2FyZCA9IChpdGVtKSA9PiB7XHJcbiAgY29uc3QgYWRkTmV3Q2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgaXRlbSxcclxuICAgICcjY2FyZC10ZW1wbGF0ZScsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXHJcbiAgICB1c2VySWQsXHJcbiAgICBoYW5kbGVDYXJkTGlrZSxcclxuICAgIGNhcmRUcmFzaEJ1dHRvblZlcmlmeSxcclxuICAgIGhhbmRsZURlbGV0ZUNhcmRcclxuICApO1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gYWRkTmV3Q2FyZC5nZXRDYXJkKCk7XHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbn07XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvcHVwIENhcmQgSW1hZ2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKCcuaW1hZ2UnKTtcclxuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKGRhdGEpIHtcclxuICBpbWFnZVBvcHVwLm9wZW4oZGF0YSk7XHJcbn1cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICBXT1JLIFNFQ1RJT04gQkVHSU5TIEhFUkUgRk9SIFJFVklFV0VSIFNVQk1JU1NJT04gICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDbGFzcyBJbnN0YW5jZXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuY29uc3QgY2xhc3NVc2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgdXNlck5hbWVTZWxlY3RvcjogJy5wcm9maWxlX190aXRsZScsXHJcbiAgdXNlckpvYlNlbGVjdG9yOiAnLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJyxcclxuICB1c2VyQXZhdGFyU2VsZWN0b3I6ICcucHJvZmlsZV9fYXZhdGFyJyxcclxufSk7XHJcblxyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKHsgcmVuZGVyZXI6IHJlbmRlckNhcmQgfSwgJy5jYXJkcycpO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICBOZXcgRm9ybSBWYWxpZGF0b3JzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcblxyXG5mdW5jdGlvbiB2YWxpZGF0aW9uRWFibGluZyhzZXR0aW5ncykge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmZvcm1TZWxlY3RvcikpO1xyXG4gIGZvcm1MaXN0LmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBlbGVtZW50KTtcclxuICAgIGNvbnN0IGZvcm1OYW1lID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XHJcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XHJcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIH0pO1xyXG59XHJcbnZhbGlkYXRpb25FYWJsaW5nKHNldHRpbmdzKTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgIEluaXRpYWwgcGFnZSBsb2FkOiBTZXR0aW5nIFVzZXIgSW5mb3JtYXRpb24gYW5kIFJlbmRlciBJbml0aWFsIENhcmRzICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvcm1hdGlvbigpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxyXG4gIC50aGVuKChbdXNlckRhdGEsIGNhcmREYXRhXSkgPT4ge1xyXG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG4gICAgY2xhc3NVc2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XHJcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkRGF0YSk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIH0pO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICBGb3JtOiBDaGFuZ2luZyBBdmF0YXIgUGljdHVyZSAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUF2YXRhckltYWdlU2VydmVyU3VibWl0KGRhdGEpIHtcclxuICBhdmF0YXJDaGFuZ2VGb3JtUG91cC5yZW5kZXJMb2FkaW5nKGRhdGEpO1xyXG4gIGFwaVxyXG4gICAgLnVwZGF0ZVByb2ZpbGVQaWN0dXJlKGRhdGEpXHJcbiAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgY2xhc3NVc2VySW5mby5zZXRVc2VySW5mbyhyZXNwb25zZSk7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBhdmF0YXJDaGFuZ2VGb3JtUG91cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGF2YXRhckNoYW5nZUZvcm1Qb3VwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmNvbnN0IGF2YXRhckNoYW5nZUZvcm1Qb3VwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgJy5hdmF0YXJfX21vZGFsJyxcclxuICBoYW5kbGVBdmF0YXJJbWFnZVNlcnZlclN1Ym1pdFxyXG4pO1xyXG5cclxucHJvZmlsZUF2YXRhckVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbJ2F2YXRhci1mb3JtJ10udG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICBhdmF0YXJDaGFuZ2VGb3JtUG91cC5vcGVuKCk7XHJcbn0pO1xyXG5hdmF0YXJDaGFuZ2VGb3JtUG91cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICBGb3JtOiBBZGRpbmcgTmV3IENhcmRzICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZU5ld0NhcmRTZXJ2ZXJSZW5kZXJTdWJtaXQoZGF0YSkge1xyXG4gIG5ld0NhcmRQb3B1cEZvcm0ucmVuZGVyTG9hZGluZyhkYXRhKTtcclxuICBhcGlcclxuICAgIC5hZGROZXdDYXJkKGRhdGEpXHJcbiAgICAudGhlbigoY2FyZERhdGEpID0+IHtcclxuICAgICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoW2NhcmREYXRhXSk7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBuZXdDYXJkUG9wdXBGb3JtLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgbmV3Q2FyZFBvcHVwRm9ybS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5jb25zdCBuZXdDYXJkUG9wdXBGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgJy5jYXJkLW1vZGFsJyxcclxuICBoYW5kbGVOZXdDYXJkU2VydmVyUmVuZGVyU3VibWl0XHJcbik7XHJcblxyXG5jYXJkQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGZvcm1WYWxpZGF0b3JzWyduZXctY2FyZC1mb3JtJ10udG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICBuZXdDYXJkUG9wdXBGb3JtLm9wZW4oKTtcclxufSk7XHJcbm5ld0NhcmRQb3B1cEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgIEZvcm06IEVkaXRpbmcgUHJvZmlsZSBVc2VyIEluZm9ybWF0aW9uICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChkYXRhKSB7XHJcbiAgcHJvZmlsZVBvcHVwRm9ybS5yZW5kZXJMb2FkaW5nKGRhdGEpO1xyXG4gIGFwaVxyXG4gICAgLmVkaXRQcm9maWxlSW5mb3JtYXRpb24oZGF0YSlcclxuICAgIC50aGVuKChuZXdVc2VyRGF0YSkgPT4ge1xyXG4gICAgICBjbGFzc1VzZXJJbmZvLnNldFVzZXJJbmZvKG5ld1VzZXJEYXRhKTtcclxuICAgIH0pXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIHByb2ZpbGVQb3B1cEZvcm0uY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwcm9maWxlUG9wdXBGb3JtLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmNvbnN0IHByb2ZpbGVQb3B1cEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICAnLnByb2ZpbGUtbW9kYWwnLFxyXG4gIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0XHJcbik7XHJcbnByb2ZpbGVQb3B1cEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGNvbnN0IHVzZXJEYXRhID0gY2xhc3NVc2VySW5mby5nZXRVc2VySW5mbygpO1xyXG5cclxuICB0aXRsZUlucHV0LnZhbHVlID0gdXNlckRhdGEudXNlck5hbWU7XHJcbiAgam9iSW5wdXQudmFsdWUgPSB1c2VyRGF0YS51c2VySm9iRGVzY3JpcHRpb247XHJcbiAgZm9ybVZhbGlkYXRvcnNbJ3Byb2ZpbGUtaW5wdXQtZm9ybSddLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgcHJvZmlsZVBvcHVwRm9ybS5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIENhcmQgTGlrZS9Vbmxpa2UgRnVuY3Rpb24gICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRMaWtlKGNhcmQpIHtcclxuICBpZiAoY2FyZC5jYXJkSXNMaWtlZCgpKSB7XHJcbiAgICBhcGlcclxuICAgICAgLmxpa2VzQ291bnRSZW1vdmUoY2FyZC5fY2FyZElkKVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgY2FyZC51cGRhdGVMaWtlKHJlcyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgYXBpXHJcbiAgICAgIC5saWtlc0NvdW50QWRkKGNhcmQuX2NhcmRJZClcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGNhcmQudXBkYXRlTGlrZShyZXMpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgVmVyaWZ5IERlbGV0ZSBDYXJkIE1vZGFsICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuY29uc3QgY2FyZFZlcmlmeURlbGV0ZSA9IG5ldyBQb3B1cENhcmREZWxldGVWZXJpZnkoXHJcbiAgJy5jYXJkLWRlbGV0ZS12ZXJpZnknLFxyXG4gIGhhbmRsZURlbGV0ZUNhcmRcclxuKTtcclxuY2FyZFZlcmlmeURlbGV0ZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2FyZChjYXJkSWQsIGVsZW1lbnQpIHtcclxuICBjYXJkVmVyaWZ5RGVsZXRlLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XHJcbiAgICBjYXJkVmVyaWZ5RGVsZXRlLnJlbmRlckxvYWRpbmcoY2FyZElkKTtcclxuXHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUNhcmRSZXF1ZXN0KGNhcmRJZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjYXJkVmVyaWZ5RGVsZXRlLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgY2FyZFZlcmlmeURlbGV0ZS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhcmRUcmFzaEJ1dHRvblZlcmlmeSgpIHtcclxuICBjYXJkVmVyaWZ5RGVsZXRlLm9wZW4oKTtcclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgX3JlcXVlc3QodXJsLCBvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godXJsLCBvcHRpb25zKS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm9ybWF0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coXCJEb25lIHdpdGggZ2V0dGluZyB1c2VyIGluZm9cIik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVByb2ZpbGVQaWN0dXJlKHsgYXZhdGFyIH0pIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXIsXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkRvbmUgcnVubmluZyBBdmF0YXIgY2hhbmdlIEFQSVwiKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHsgaGVhZGVyczogdGhpcy5faGVhZGVycyB9KVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiRG9uZSB3aXRoIGdldHRpbmcgaW5pdGlhbCBjYXJkc1wiKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGROZXdDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkRvbmUgYWRkaW5nIGNhcmQgZnJvbSBzZXJ2ZXIgdG8gcGFnZVwiKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBlZGl0UHJvZmlsZUluZm9ybWF0aW9uKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBhYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkRvbmUgc2VuZGluZyB1c2VyIGluZm8gdG8gc2VydmVyXCIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmRSZXF1ZXN0KGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coXCJEb25lIGRlbGV0aW5nIGNhcmRcIik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGxpa2VzQ291bnRBZGQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJEb25lIGFkZGluZyBsaWtlXCIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGxpa2VzQ291bnRSZW1vdmUoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJEb25lIGRlbGV0aW5nIGxpa2VcIik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgZXhhbXBsZSBvZiB3aGF0IGl0IHdpbGwgbG9vayBsaWtlIGluIGluZGV4LmpzICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8gbG9hZGluZyB1c2Vyc1xyXG4vLyBHRVQgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi91c2Vycy9tZVxyXG4vLyBsb2FkaW5nIGNhcmRzXHJcbi8vIEdFVCBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyL2NhcmRzXHJcbi8vIEVkaXRpbmcgdGhlIHByb2ZpbGVcclxuLy8gUEFUQ0ggaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi91c2Vycy9tZVxyXG4vLyBBZGRpbmcgbmV3IGNhcmRcclxuLy8gUE9TVCBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyL2NhcmRzXHJcbi8vIERlbGV0ZSBjYXJkIHJlcXVlc3RcclxuLy8gREVMRVRFIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvY2FyZHMvY2FyZElkXHJcbi8vIFJlcXVlc3QgdG8gbGlrZSBjYXJkc1xyXG4vLyBQVVQgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi9jYXJkcy9saWtlcy9jYXJkSWRcclxuLy8gUmVtb3ZlL2RlbGV0ZSBsaWtlXHJcbi8vIERFTEVURSBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyL2NhcmRzL2xpa2VzL2NhcmRJZFxyXG4vLyBVcGRhdGluZyBwcm9maWxlIHBpY3R1cmVcclxuLy8gUEFUQ0ggaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi91c2Vycy9tZS9hdmF0YXJcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgY29uc3QgaW1hZ2VQb3B1cE1haW4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWFnZV9fbWFpblwiKTtcclxuICAgIGNvbnN0IGltYWdlUG9wdXBEZXNjcmlwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5pbWFnZV9fZGVzY3JpcHRpb25cIlxyXG4gICAgKTtcclxuICAgIGltYWdlUG9wdXBNYWluLnNyYyA9IGRhdGEuc3JjO1xyXG4gICAgaW1hZ2VQb3B1cE1haW4uYWx0ID0gZGF0YS5hbHQ7XHJcbiAgICBpbWFnZVBvcHVwRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLmFsdDtcclxuXHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJKb2JTZWxlY3RvciwgdXNlckF2YXRhclNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl91c2VySm9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3VzZXJBdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQXZhdGFyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB1c2VyTmFtZTogdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICB1c2VySm9iRGVzY3JpcHRpb246IHRoaXMuX3VzZXJKb2JFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHVzZXJEYXRhKSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fdXNlckpvYkVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5hYm91dDtcclxuICAgIHRoaXMuX3VzZXJBdmF0YXJFbGVtZW50LnNyYyA9IHVzZXJEYXRhLmF2YXRhcjtcclxuICAgIHRoaXMuX3VzZXJBdmF0YXJFbGVtZW50LmFsdCA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGNhcmREYXRhKSB7XHJcbiAgICBjYXJkRGF0YS5yZXZlcnNlKCkuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBDYXJkRGVsZXRlVmVyaWZ5IGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG5cclxuICAgIHRoaXMuX3ZlcmlmeURlbGV0ZUNhcmRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgJyNtb2RhbC12ZXJpZnktZGVsZXRlLWNhcmQtYnV0dG9uJ1xyXG4gICAgKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gdGhpcy5faGFuZGxlU3VibWl0LmJpbmQodGhpcyk7XHJcblxyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fZm9ybScpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fYnV0dG9uJyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcsIGxvYWRpbmdUZXh0ID0gJ1NhdmluZy4uLicpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0QWN0aW9uKGFjdGlvbikge1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGFjdGlvbjtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl92ZXJpZnlEZWxldGVDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlU3VibWl0KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVTdWJtaXQoKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJwcm9maWxlRWRpdEJ1dHRvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInByb2ZpbGVGb3JtRWxlbWVudCIsInRpdGxlSW5wdXQiLCJqb2JJbnB1dCIsImNhcmRBZGRCdXR0b24iLCJwcm9maWxlQXZhdGFyRWRpdEJ1dHRvbiIsIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJ1c2VySWQiLCJoYW5kbGVDYXJkTGlrZSIsImNhcmRUcmFzaEJ1dHRvblZlcmlmeSIsImhhbmRsZURlbGV0ZUNhcmQiLCJ0aGlzIiwiX3VzZXJJZCIsIl9jYXJkSWQiLCJfaWQiLCJfY3VycmVudElkT3duZXIiLCJvd25lciIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfY2FyZFRyYXNoQnV0dG9uVmVyaWZ5IiwiX2hhbmRsZUNhcmRMaWtlIiwiX2NhcmRMaWtlcyIsImxpa2VzIiwiX2NhcmRTZWxlY3RvciIsImNhcmRJc0xpa2VkIiwiYmluZCIsIl9oYW5kbGVEZWxldGVDYXJkIiwiaGFuZGxlQ2FyZFRyYXNoQnV0dG9uIiwiY2FyZFRyYXNoQnV0dG9uIiwiX2VsZW1lbnQiLCJyZW1vdmUiLCJ1cGRhdGVMaWtlIiwicmVzdWx0Iiwic2hvd0NhcmRMaWtlcyIsImxlbmd0aCIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic29tZSIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsIl9zZXRFdmVudExpc3RlbmVycyIsImNhcmRMaWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jYXJkSW1hZ2VFbGVtZW50IiwiZ2V0Q2FyZCIsImNhcmRUaXRsZUVsZW1lbnQiLCJzcmMiLCJhbHQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsIl9lcnJvckVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiZXJyb3JFbGVtZW50IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiaW5wdXRMaXN0IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfaW5wdXRMaXN0IiwiX2J1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwib3BlbiIsIl9tb2RhbEV4aXRCdXR0b24iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJfb3ZlcmxheUNsaWNrQ2xvc2VMaXN0ZW5lciIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX21vZGFsSW5wdXRzIiwiX3N1Ym1pdEJ1dHRvbiIsIl9zdWJtaXRCdXR0b25UZXh0IiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRPYmplY3QiLCJlbGVtZW50IiwidmFsdWUiLCJyZXNldCIsImFwaSIsIl9yZWYiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJfcmVxdWVzdCIsInVybCIsIm9wdGlvbnMiLCJmZXRjaCIsInRoZW4iLCJnZXRVc2VySW5mb3JtYXRpb24iLCJmaW5hbGx5IiwiY29uc29sZSIsImxvZyIsInVwZGF0ZVByb2ZpbGVQaWN0dXJlIiwiX3JlZjIiLCJhdmF0YXIiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImdldEluaXRpYWxDYXJkcyIsImFkZE5ld0NhcmQiLCJfcmVmMyIsInJlc3BvbnNlIiwiZWRpdFByb2ZpbGVJbmZvcm1hdGlvbiIsIl9yZWY0IiwiYWJvdXQiLCJkZWxldGVDYXJkUmVxdWVzdCIsImNhcmRJZCIsImxpa2VzQ291bnRBZGQiLCJsaWtlc0NvdW50UmVtb3ZlIiwiYXV0aG9yaXphdGlvbiIsImltYWdlUG9wdXAiLCJpbWFnZVBvcHVwTWFpbiIsImltYWdlUG9wdXBEZXNjcmlwdGlvbiIsImNsYXNzVXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckpvYlNlbGVjdG9yIiwidXNlckF2YXRhclNlbGVjdG9yIiwiX3VzZXJOYW1lRWxlbWVudCIsIl91c2VySm9iRWxlbWVudCIsIl91c2VyQXZhdGFyRWxlbWVudCIsImdldFVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VySm9iRGVzY3JpcHRpb24iLCJzZXRVc2VySW5mbyIsInVzZXJEYXRhIiwiY2FyZFNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiY2FyZERhdGEiLCJyZXZlcnNlIiwiaXRlbSIsImFkZEl0ZW0iLCJwcmVwZW5kIiwiY2FyZEVsZW1lbnQiLCJmb3JtVmFsaWRhdG9ycyIsImZvcm1TZWxlY3RvciIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwiYWxsIiwiY2F0Y2giLCJlcnIiLCJlcnJvciIsImF2YXRhckNoYW5nZUZvcm1Qb3VwIiwibmV3Q2FyZFBvcHVwRm9ybSIsInByb2ZpbGVQb3B1cEZvcm0iLCJuZXdVc2VyRGF0YSIsImNhcmQiLCJjYXJkVmVyaWZ5RGVsZXRlIiwiX3ZlcmlmeURlbGV0ZUNhcmRCdXR0b24iLCJfaGFuZGxlU3VibWl0Iiwic2V0U3VibWl0QWN0aW9uIiwiYWN0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==